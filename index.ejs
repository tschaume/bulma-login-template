<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="Aldi Duzha" />
    <meta name="description" content="Free Bulma Login Template, part of Awesome Bulma Templates" />
    <meta name="keywords" content="bulma, login, page, website, template, free, awesome" />
    <link rel="canonical" href="https://aldi.github.io/bulma-login-template/" />
    <title>Materials Project Profile</title>
    <link href="https://fonts.googleapis.com/css?family=Quicksand" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.0/css/bulma.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma-social@1/bin/bulma-social.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13.0/css/all.min.css" />
    <link rel="stylesheet" href="css/styles.css" />
    <script src="https://challenges.cloudflare.com/turnstile/v0/api.js?render=explicit" defer ></script>
    <script>
      window.onload = function () {
          turnstile.render("#turnstile-widget", {
              sitekey: "0x4AAAAAAAQi0pxO4tbJEkK4",
              callback: function (token) {
                  fetch(
                      "/turnstile",
                      {
                          method: "POST",
                          headers: {'Content-Type': 'application/json'},
                          body: JSON.stringify({token: token})
                      })
                      .then(response => {
                          if (!response.ok) {
                              throw new Error("server-side turnstile verification failed");
                          }
                          return response.json(); // Parse the JSON response
                      })
                      .then(data => {
                          document.getElementById("login-form").classList.toggle("is-hidden");
                      })
                      .catch(error => {
                          console.error(error);
                      });
              },
              "error-callback": function (errorCode) {
                  console.log("Turnstile error: ", errorCode);
              },
          });
      };
    </script>
  </head>
  <body>
    <section class="hero is-fullheight">
      <div class="hero-body">
        <div class="container has-text-centered">
          <% if (error) { %>
          <div class="columns is-centered">
            <div class="notification is-danger is-light"><%= error %></div>
          </div>
          <% } %>
          <div class="columns is-centered">
            <div class="column is-6">
              <div class="box">
                <% if (username) { %>
                <h1 class="title has-text-white">Your Materials Project Profile</h1>
                <div class="columns has-text-white">
                    <div class="column has-text-weight-semibold has-text-right">Username</div>
                    <div class="column has-text-left"><%= username %></div>
                </div>
                <div class="columns has-text-white">
                    <div class="column has-text-weight-semibold has-text-right">API Key</div>
                    <div class="column has-text-left"><%= apikey %></div>
                </div>
                <div class="columns has-text-white">
                    <div class="column has-text-weight-semibold has-text-right">Groups</div>
                    <div class="column has-text-left"><%= groups %></div>
                </div>
                <% if (referrer) { %>
                <a class="button is-primary" href="<%= referrer %>">Back</a>
                <% } %>
                <a class="button is-danger" href="/logout">Logout</a>
                <% } else { %>
                <h1 class="title has-text-white">The Materials Project</h1>
                <ul class="has-text-white mb-3">
                    <li>Please refer to
                        <a href="https://docs.materialsproject.org/frequently-asked-questions#how-do-i-sign-in-to-the-materials-project">
                            this page
                        </a> in our docs for more info about Materials Project accounts.
                    </li>
                    <li>
                        <a href="https://www.google.com/chrome/">Google Chrome</a> is the preferred browser.
                    </li>
                </ul>
                <div id="turnstile-widget"></div>
                <form id="login-form" class="is-hidden">
                  <div class="buttons is-centered mb-0">
                    <a class="button is-medium is-info mb-0" style="background-color:#2e7f9f" href="/connect/orcid">
                      <span class="icon">
                        <i class="fab fa-orcid"></i>
                      </span>
                      <span>Continue with ORCID</span>
                    </a>
                    <p class="has-text-white is-size-7 mb-3">
                    Make sure to set visibility for your email address to "Trusted" in
                    <a href="https://orcid.org/my-orcid">
                        your ORCID iD profile
                    </a>.
                    </p>
                    <a class="button is-medium is-github mb-0" href="/connect/github">
                      <span class="icon">
                        <i class="fab fa-github"></i>
                      </span>
                      <span>Continue with GitHub</span>
                    </a>
                    <p class="has-text-white is-size-7 mb-3">
                    Make sure to enable a public email address in
                    <a href="https://github.com/settings/profile">
                        your GitHub profile settings
                    </a>.
                    </p>
                    <a class="button is-medium is-youtube mb-3" href="/connect/google">
                      <span class="icon">
                        <i class="fab fa-google"></i>
                      </span>
                      <span>Continue with Google/GMail</span>
                    </a>
                    <a class="button is-medium is-facebook mb-3" href="/connect/facebook">
                      <span class="icon">
                        <i class="fab fa-facebook"></i>
                      </span>
                      <span>Continue with Facebook</span>
                    </a>
                    <a class="button is-medium is-microsoft mb-0" href="/connect/microsoft">
                      <span class="icon">
                        <i class="fab fa-microsoft"></i>
                      </span>
                      <span>Continue with Microsoft</span>
                    </a>
                    <p class="has-text-white is-size-7 mb-3">
                    Use this with <code style="background-color: transparent;">qq.com</code> email addresses after 
                    <a href="https://account.microsoft.com/account/Account">
                        creating a Microsoft account
                    </a>.
                    </p>
                    <a class="button is-medium is-openid mb-3" href="/connect/amazon">
                      <span class="icon">
                        <i class="fab fa-amazon"></i>
                      </span>
                      <span>Continue with Amazon</span>
                    </a>
                    <hr>
                    <p class="has-text-white is-size-7 mb-0">
                    Only use this option if creating an external account with the above providers isn't possible.
                    </p>
                    <a class="button is-medium is-info mb-0" href="/connect/portier">
                      <span class="icon">
                        <i class="fas fa-envelope"></i>
                      </span>
                      <span>Continue with Email</span>
                    </a>
                  </div>
                </form>
                <% } %>
              </div>
            </div>
          </div>
          <div class="columns is-centered">
            <div class="column is-6">
              <p class="footer-text is-size-6">
              Please refer to our <a class="is-link" href="https://docs.materialsproject.org">our documentation</a>, or check and reach out on <a class="is-link" href="https://matsci.org">our forum</a> if youâ€™re having trouble logging in, or if you can't use any of the listed login methods.
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>
  </body>
</html>
